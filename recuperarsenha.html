<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZenithStudios</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/media-queryes.css">
    <link rel="shortcut icon" href="assets/img/logo_zenith-icon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body>
    <header class="header_login-page">
        <div class="div__logo-zenith">
            <a href="homepage.html">
                <img src="assets/img/zenith-logo_letra.png" class="logo-zenith">
            </a>
        </div>

        <div class="menu-toggle" id="menuToggle">
            <i class="bi bi-list"></i>
            <i class="bi bi-x" style="display: none;"></i>
        </div>

        <nav>
            <button class="close-menu" id="closeMenu">
                <i class="bi bi-x-lg"></i>
            </button>

            <a href="homepage.html#produtos-section" class="a-nav">Comprar</a>
            <a href="homepage.html" class="a-nav">Início</a>
            <a href="homepage.html#contact-section" class="a-nav">Contate-nos</a>
            <a href="" class="a-nav"><i class="bi bi-search"></i></a>
            <a href="" class="a-nav"><i class="bi bi-heart-fill"></i></a>
            <a href="#" id="user-icon" class="a-nav"><i class="bi bi-person-fill"></i></a>
        </nav>
    </header>



    <section class="login-section">

        <div class="login-container">

            <div class="login-box">
                <h1>ZenithStudios.</h1>

                <!-- FORMULÁRIO CORRETO DE RECUPERAÇÃO DE SENHA -->
                <form id="resetForm">
                    <input type="email" id="emailReset" placeholder="Digite seu email" required> <br>

                    <button type="submit" class="button-padrao">Enviar link de recuperação</button> <br>

                    <p>
                        <a href="index.html" class="a-cadastrar">voltar</a>
                    </p>
                </form>

                <p id="resetMsg" style="margin-top:10px; font-weight:bold;"></p>
            </div>

            <div class="img__lateral-box">
                <div class="background-carousel"></div>
            </div>

        </div>

    </section>


    <!-- SUPABASE -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="assets/js/supabaseClient.js"></script>

    <script>
        const form = document.getElementById("resetForm");
        const msg = document.getElementById("resetMsg");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const email = document.getElementById("emailReset").value;

            const { error } = await supabase.auth.resetPasswordForEmail(email, {
                redirectTo: "https://zenithstudios.netlify.app/update-password.html"
                // ou para localhost:
                // redirectTo: "http://localhost:5500/update-password.html"
            });

            if (error) {
                msg.textContent = "Erro: " + error.message;
                msg.style.color = "red";
            } else {
                msg.textContent = "Enviamos um link de recuperação para seu email!";
                msg.style.color = "#0f0";
            }
        });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="assets/js/script.js"></script>
    <script src="assets/js/hamburguer.js"></script>
    <script src="assets/js/toast.js"></script>
</body>

</html>
